# config/services.yaml
parameters:
  credit_initial: 20
  frais_plateforme: 2
  mail_from: "no-reply@ecoride.fr"
  mail_reply_to: "contact@ecoride.fr"
  mongodb_db: "%env(string:MONGODB_DB)%" # ðŸ‘ˆ on expose le nom de DB en paramÃ¨tre

services:
  _defaults:
    autowire: true
    autoconfigure: true

  App\:
    resource: "../src/"
    exclude:
      - "../src/DependencyInjection/"
      - "../src/Entity/"
      - "../src/Kernel.php"

  # ðŸ‘‡ Service Mongo : l'ID est le FQCN et "arguments" est SOUS ce service
  MongoDB\Client:
    arguments:
      - "%env(MONGODB_URL)%"

  App\Service\NotificationService:
    arguments:
      $fromEmail: "%mail_from%"
      $replyTo: "%mail_reply_to%"

  App\Service\Frais:
    arguments:
      $fraisPlateforme: "%frais_plateforme%"

  App\Controller\Api\UtilisateurController:
    arguments:
      $creditInitial: "%credit_initial%"

  App\Controller\ContactController:
    arguments:
      $mailFrom: "%mail_from%"
      $mailReplyTo: "%mail_reply_to%"

  App\EventListener\LoginSuccessListener:
    tags:
      - {
          name: kernel.event_listener,
          event: security.interactive_login,
          method: onSecurityInteractiveLogin,
        }
